name: Integration tests
on:
  push:
    branches:
      - master

env:
  # Golang version to use across CI steps
  GOLANG_VERSION: '1.16.5'

jobs:
  build-docker:
    name: Build Docker image
    runs-on: ubuntu-18.04
    if: github.head_ref != ''
    steps:
      - name: Checkout code
        uses: actions/checkout@v2
      - uses: uraimo/run-on-arch-action@v2.0.5
        name: Build Docker image
        with:
          arch: armv7
          distro: ubuntu18.04
        run: |
          echo $(uname -a)
          make image